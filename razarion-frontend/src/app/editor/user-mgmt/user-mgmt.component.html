<p-table [value]="userBackendInfos" dataKey="userId" [style]="{'height':'80em','overflow-y':'scroll'}">
  <ng-template #header>
    <tr>
      <th></th>
      <th>Creation</th>
      <th>Name</th>
      <th>Email</th>
      <th>Id</th>
    </tr>
  </ng-template>
  <ng-template #body let-userBackendInfo let-expanded="expanded">
    <tr>
      <td>
        <p-button type="button" pRipple [pRowToggler]="userBackendInfo" [text]="true" [rounded]="true" [plain]="true"
                  [icon]="expanded ? 'pi pi-chevron-down' : 'pi pi-chevron-right'"/>
      </td>
      <td>
        {{ userBackendInfo.creationDate | date:'dd.MM.yyyy HH:mm:ss' }}
      </td>
      <td>
        {{ userBackendInfo.name }}
      </td>
      <td>
        {{ userBackendInfo.email }}
      </td>
      <td>
        {{ userBackendInfo.userId }}
      </td>
    </tr>
  </ng-template>
  <ng-template #expandedrow let-userBackendInfo>
    <tr>
      <td colspan="5">
        <div class="grid grid-cols-12 gap-4">
          <span class="col-span-3">Registered</span>
          <div class="col-span-9">
            {{ userBackendInfo.registerDate | date:'dd.MM.yyyy HH:mm:ss' }}
          </div>
        </div>
        <div class="grid grid-cols-12 gap-4">
          <span class="col-span-3">Verified</span>
          <div class="col-span-9">
            {{ userBackendInfo.verificationDoneDate | date:'dd.MM.yyyy HH:mm:ss' }}
          </div>
        </div>
        <div class="grid grid-cols-12 gap-4">
          <span class="col-span-3">Level</span>
          <div class="col-span-9">
            <level [(levelId)]="userBackendInfo.levelId"></level>
            <p-button icon="pi pi-save" styleClass="p-button-rounded p-button-text p-button-sm" title="Save"
                      (onClick)="onSaveLevel(userBackendInfo)">
            </p-button>
          </div>
        </div>
        <div class="grid grid-cols-12 gap-4">
          <span class="col-span-3">Active quest</span>
          <div class="col-span-9">
            <p-select [placeholder]="'...'"
                      [options]="questOptions"
                      [(ngModel)]="userBackendInfo.activeQuest"
                      [showClear]="true"
                      optionLabel="label"
                      optionValue="questId">
            </p-select>
            <p-button icon="pi pi-save" styleClass="p-button-rounded p-button-text p-button-sm" title="Save"
                      (onClick)="onSaveActiveQuest(userBackendInfo)">
            </p-button>
          </div>
        </div>
        <div class="grid grid-cols-12 gap-4">
          <span class="col-span-3">Active quest id</span>
          <div class="col-span-9">
            {{ userBackendInfo.activeQuest }}
          </div>
        </div>
        <div class="grid grid-cols-12 gap-4">
          <span class="col-span-3">Crystals</span>
          <div class="col-span-9">
            <p-inputNumber inputId="integeronly" [(ngModel)]="userBackendInfo.crystals"
                           [size]="'small'"></p-inputNumber>
            <p-button icon="pi pi-save" styleClass="p-button-rounded p-button-text p-button-sm" title="Save"
                      (onClick)="onSaveCrystals(userBackendInfo)">
            </p-button>
          </div>
        </div>
        <div class="grid grid-cols-12 gap-4">
          <span class="col-span-3">Completed quest ids</span>
          <div class="col-span-9">
            <p-chip *ngFor="let questId of userBackendInfo.completedQuestIds"
                    [label]="questId"
                    [removable]="true"
                    (onRemove)="removeQuestId(userBackendInfo, questId)">
            </p-chip>
            <p-button icon="pi pi-save" styleClass="p-button-rounded p-button-text p-button-sm" title="Save"
                      (onClick)="onSaveCompletedQuestIds(userBackendInfo)">
            </p-button>
          </div>
        </div>
        <div class="grid grid-cols-12 gap-4">
          <span class="col-span-3">Unlocked</span>
          <div class="col-span-9">
            <p-chip
              *ngFor="let unlockedId of userBackendInfo.unlockedIds;"
              [label]="unlockedId"
              [removable]="true"
              (onRemove)="removeUnlockedId(userBackendInfo, unlockedId)">
            </p-chip>
            <p-button icon="pi pi-save" styleClass="p-button-rounded p-button-text p-button-sm" title="Save"
                      (onClick)="onSaveUnlockedIds(userBackendInfo)">
            </p-button>
          </div>
        </div>
      </td>
    </tr>
  </ng-template>

</p-table>
