version: '3'

services:
  web:
    build: wildfly/.
    ports:
      - "32778:8080"
      - "32768:9990"
      - "60784:8787"
    volumes:
      - ./stage/wildfly:/tmp/stage
  db:
    image: mariadb
    restart: always
    environment:
      MYSQL_DATABASE: razarion
      MYSQL_USER: raz_user
      MYSQL_PASSWORD: 1234
      MYSQL_ROOT_PASSWORD: 1234
    volumes:
      - ./stage/db:/docker-entrypoint-initdb.d
    ports:
      - "32788:3306"
    command: [
        '--wait_timeout=28800',
      ]
  mongo:
    image: mongo
    restart: always
