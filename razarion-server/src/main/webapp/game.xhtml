<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://xmlns.jcp.org/jsf/core"
>

<f:metadata>
    <f:event type="preRenderComponent" listener="#{pageTrackerBean.trackPage(facesContext.viewRoot.viewId)}"/>
</f:metadata>

<h:head>
    <meta charset="UTF-8"/>
    <link type="text/css" rel="stylesheet" href="razarion.css"/>
    <title>Razarion</title>
    <script type="text/javascript" language="javascript" src="NativeRazarion.js"></script>
    <!-- Errai configuration                                          -->
    <script type="text/javascript">erraiBusRemoteCommunicationEnabled = false;</script>
    <script type="text/javascript">erraiJaxRsJacksonMarshallingActive = true;</script>
    <meta name="gwt:property" content="locale=#{gamePageBean.language}"/>
    <script type="text/javascript" language="javascript" src="razarion_client/razarion_client.nocache.js"></script>
</h:head>
<h:body styleClass="main-page">
    <script>
        var xhr = new XMLHttpRequest();
        xhr.open('GET', '/rest/tracker/webpagescript/game');
        xhr.send(null);
    </script>
    <noscript>
        <img src="/rest/tracker/webpagenoscript/game"/>
        <div>Dein Browser unterstützt kein JavaScript. JavaScript wird jedoch zum Spielen von Razarion benötigt.</div>
    </noscript>
    <script>
        var xhr = new XMLHttpRequest();
        xhr.open('GET', '/rest/tracker/webpagecookie/game/' + navigator.cookieEnabled);
        xhr.send(null);
    </script>

    <script type="text/javascript">
        window.RAZ_startTime = new Date().getTime();
        window.fbAsyncInit = function () {
            FB.init({
                appId: '#{gamePageBean.facebookAppId}',
                xfbml: true,
                version: 'v2.8'
            });
        };

        (function (d, s, id) {
            var js, fjs = d.getElementsByTagName(s)[0];
            if (d.getElementById(id)) {
                return;
            }
            js = d.createElement(s);
            js.id = id;
            js.src = "//connect.facebook.net/de_DE/sdk.js";
            fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk'));
    </script>

    <div class="loading-cover" id="RAZARION_LOADING_COVER">
        <div class="inner-loading-center-container">
            <div class="inner-loading-text">
                Lade Razarion
            </div>
            <div>
                <progress value="0.02" class="inner-loading-progress" id="RAZARION_LOADING_PROGRESS" />
            </div>
        </div>
    </div>
    <iframe src="javascript:''" id="__gwt_historyFrame" tabIndex='-1' style="position:absolute;width:0;height:0;border:0"></iframe>

    <noscript>
        <div style="width: 22em; position: absolute; left: 50%; margin-left: -11em; color: red; background-color: white; border: 1px solid red; padding: 4px; font-family: sans-serif">
            Your web browser must have JavaScript enabled
            in order for this application to display correctly.
        </div>
    </noscript>
</h:body>
</html>
