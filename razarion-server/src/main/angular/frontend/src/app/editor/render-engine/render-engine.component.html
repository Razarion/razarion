<div class="flex flex-column">
  <div class="mr-2">
    <p-toolbar>
      <div class="p-toolbar-group-left">
        <p-fileUpload chooseLabel="Import"
                      chooseIcon="pi pi-folder-open"
                      mode="basic"
                      styleClass="p-button-sm"
                      [auto]=true
                      [customUpload]=true
                      (uploadHandler)="onImport($event)">
        </p-fileUpload>
        <i>&nbsp;</i>
        <p-button label="Dump"
                  icon="pi pi-save"
                  styleClass="p-button-sm"
                  (onClick)="onDumpAll()"></p-button>
      </div>
    </p-toolbar>
  </div>
  <div class="mr-2">
    <p-panel header="Three.js properties">
      <div class="field grid">
        Three.js Revision
        <div class="col">
          {{threeJsRevision}}
        </div>
      </div>
      <div class="field grid">
        Position
        <p-button type="button" icon="pi pi-eye"
                  styleClass="p-button-rounded p-button-text p-button-sm p-button-success"
                  (onClick)="onShowCenterPosition()"></p-button>
        <div class="col">
          {{centerGroundPosition?.x | number}} : {{centerGroundPosition?.y | number}}
          (z:{{centerGroundPosition?.z | number}})
        </div>
      </div>
      <div class="field grid">
        Selected
        <div class="col">
          {{selectedThreeJsName}}
        </div>
      </div>
    </p-panel>
  </div>
  <div class="mr-2">
    <p-panel header="Node Editor">
      <div class="field grid">
        <iframe style="width: 1000px;height: 800px;" src="/assets/nodes-editor.html" #iframe (load)="onStartNodeEditor(iframe)"></iframe>
      </div>
    </p-panel>
  </div>
  <div class="mr-2">
    <p-panel header="Save Selected to Three.js Model">
      <div class="field grid">
        <span class="col-fixed" style="width:100px">Name</span>
        <div *ngIf="selectedThreeJsName" style="border: 1px solid #304562;
                     background: #17212f;
                     border-radius: 3px;
                     padding: 0.5rem 0.5rem;
                     width: 10em;">
          {{selectedThreeJsName}}
        </div>
      </div>
      <div class="field grid">
        <label for="Export" class="col-fixed" style="width:100px">Material only</label>
        <div class="col">
          <p-checkbox id="Export" [(ngModel)]="exportMaterialOnly" [binary]="true"
                      [disabled]="selectedThreeJsObject == null || !selectedThreeJsObject.material"></p-checkbox>
        </div>
      </div>
      <div class="field grid">
        <label for="saveModel" class="col-fixed" style="width:100px">Three.js Model</label>
        <div class="col">
          <p-dropdown id="saveModel" [placeholder]="'...'" [(ngModel)]="selectedThreeJsModel" [options]="threeJsModels">
          </p-dropdown>
        </div>
      </div>
      <div class="field grid">
        <p-toolbar>

          <p-button type="button" label="Save" icon="pi pi-cloud-upload" styleClass="p-button-sm"
                    [disabled]="selectedThreeJsModel == null || selectedThreeJsObject == null"
                    (onClick)="onSaveSelected()"></p-button>
          <i>&nbsp;</i>
          <p-button type="button" label="Dump" icon="pi pi-save" styleClass="p-button-sm"
                    [disabled]="selectedThreeJsObject == null"
                    (onClick)="onDumpSelected()"></p-button>
        </p-toolbar>
      </div>
    </p-panel>
  </div>
  <div class="mr-2">
    <p-panel header="View Three.js Model">
      <div class="field grid">
        <label for="loadModel" class="col-fixed" style="width:100px">Three.js Model</label>
        <div class="col">
          <p-dropdown id="loadModel" [placeholder]="'...'" (onChange)="onLoadThreeJsModel($event.value)"
                      [options]="threeJsModels">
          </p-dropdown>
        </div>
      </div>
      <p-splitter layout="vertical">
        <ng-template pTemplate>
          <p-tree [value]="treeLoadedThreeJsModel" selectionMode="single"
                  (onNodeSelect)="onTreeLoadedSelectionChanged($event)"
                  scrollHeight="200px">
          </p-tree>
        </ng-template>
        <ng-template pTemplate>
          <property-table [angular-tree-node-data]=loadedGwtAngularPropertyTable></property-table>
        </ng-template>
      </p-splitter>
    </p-panel>
  </div>
  <div class="mr-2">
    <p-splitter layout="vertical">
      <ng-template pTemplate>
        <p-tree [value]="renderEngineDisplayTree" selectionMode="single" [(selection)]="treeSelection"
                (onNodeSelect)="onTreeSelectionChanged($event)" scrollHeight="200px">
        </p-tree>
      </ng-template>
      <ng-template pTemplate>
        <property-table [angular-tree-node-data]=gwtAngularPropertyTable></property-table>
      </ng-template>
    </p-splitter>
  </div>
</div>
