<div class="flex flex-column">
  <div class="mr-2">
    <p-panel>
      <ng-template pTemplate="header">
        State
      </ng-template>

      <div class="field grid">
        <label class="col-fixed" style="width:100px">Cursor Terrain Position</label>
        <div class="col">
          {{terrainCursorXPosition | number: '3.2-2'}} : {{terrainCursorYPosition | number: '3.2-2'}}
        </div>
      </div>
      <div class="field grid">
        <label class="col-fixed" style="width:100px">Cursor Terrain Height</label>
        <div class="col">
          {{terrainCursorZPosition | number: '3.2-2'}}
        </div>
      </div>
    </p-panel>
    <p-panel>
      <ng-template pTemplate="header">
        Save selected Babylon Model
      </ng-template>
      <div class="field grid">
        <label for="selectedBabylonName" class="col-12 mb-2 md:col-2 md:mb-0">Name</label>
        <div class="col-12 md:col-10">
          <input id="selectedBabylonName" value="{{selectedBabylonName}}" disabled="true" type="text"
                 class="text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full">
        </div>
      </div>
      <div class="field grid">
        <label for="selectedBabylonId" class="col-12 mb-2 md:col-2 md:mb-0">ID</label>
        <div class="col-12 md:col-10">
          <input id="selectedBabylonId" value="{{selectedBabylonId}}" disabled="true" type="text"
                 class="text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full">
        </div>
      </div>
      <div class="field grid">
        <label for="selectedBabylonType" class="col-12 mb-2 md:col-2 md:mb-0">Class</label>
        <div class="col-12 md:col-10">
          <input id="selectedBabylonType" value="{{selectedBabylonClass}}" disabled="true" type="text"
                 class="text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full">
        </div>
      </div>
      <div class="field grid">
        <label for="dropDownBabylonModel" class="col-12 mb-2 md:col-2 md:mb-0">Babylon.js Model</label>
        <div class="col">
          <p-dropdown id="dropDownBabylonModel" [placeholder]="'...'" [(ngModel)]="dropDownBabylonModel"
                      [options]="dropDownBabylonModels">
          </p-dropdown>
        </div>
      </div>
      <p-button type="button" label="Save" icon="pi pi-cloud-upload" styleClass="p-button-sm"
                [disabled]="dropDownBabylonModel == null || selectedBabylonName == null"
                (onClick)="onSaveSelected()"></p-button>
      <i>&nbsp;</i>
    </p-panel>
    <p-panel>
      <ng-template pTemplate="header">
        Export Babylon Model
      </ng-template>
      <div class="grid">
        <div class="col">Export selected</div>
        <div class="col">
          <p-button type="button" icon="pi pi-save" styleClass="p-button-sm"
                    [disabled]="selectedBabylonName == null"
                    (onClick)="onDumpSelected()"></p-button>
        </div>
      </div>
      <div class="grid">
        <div class="col">Export all</div>
        <div class="col">
          <p-button type="button" icon="pi pi-cloud-download" styleClass="p-button-sm"
                    (onClick)="onCollectAll()"></p-button>
          &nbsp;
          <p-button type="button" icon="pi pi-save" styleClass="p-button-sm"
                    [disabled]="!allBabylonModels"
                    (onClick)="onDumpAll()"></p-button>
        </div>
      </div>
    </p-panel>
    <p-panel>
      <ng-template pTemplate="header">
        Load Babylon Model
      </ng-template>
      <div class="field grid">
        <label for="dropDownLoadBabylonModel" class="col-12 mb-2 md:col-2 md:mb-0">Babylon.js Model</label>
        <div class="col">
          <p-dropdown id="dropDownLoadBabylonModel" [placeholder]="'...'" [(ngModel)]="dropDownLoadBabylonModel"
                      [options]="dropDownBabylonModels">
          </p-dropdown>
        </div>
      </div>
      <p-button type="button" label="Load" icon="pi pi-cloud-download" styleClass="p-button-sm"
                [disabled]="dropDownLoadBabylonModel == null"
                (onClick)="onLoad()"></p-button>
      <i>&nbsp;</i>
    </p-panel>
    <p-panel>
      <ng-template pTemplate="header">
        Import GLTF
      </ng-template>
      <p-fileUpload #fileUploadElement
                    chooseLabel="Import GLTF"
                    chooseIcon="pi pi-folder-open"
                    mode="basic"
                    styleClass="p-button-sm"
                    [auto]=true
                    [customUpload]=true
                    (uploadHandler)="onImport($event)">
      </p-fileUpload>
    </p-panel>
    <p-panel>
      <ng-template pTemplate="header">
        Three.js Model Pack
      </ng-template>
      <div class="field grid">
        <label for="dropDownLoadBabylonModel" class="col-12 mb-2 md:col-2 md:mb-0">Babylon.js Model</label>
        <div class="col">
          <p-dropdown id="dropDownLoadBabylonPackModel" [placeholder]="'...'"
                      [options]="dropDownBabylonModels"
                      (onChange)="onThreeJsModelPackConfigEvent($event.value)">
          </p-dropdown>
        </div>
      </div>
      <p-button type="button" styleClass="p-button-sm"
                [disabled]="!threeJsModelPackMesh"
                label="Generate under __root__"
                (onClick)="onGenerateThreeJsModelPack()"></p-button>
      <p-table [value]="threeJsModelPackConfigs" [tableStyle]="{ 'min-width': '50rem' }">
        <ng-template pTemplate="header">
          <tr>
            <th>Id</th>
            <th>Internal Name</th>
            <th>Babylon Path</th>
            <th></th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-threeJsModelPackConfig>
          <tr>
            <td>{{ threeJsModelPackConfig.id }}</td>
            <td><input type="text" pInputText [(ngModel)]="threeJsModelPackConfig.internalName"/></td>
            <td>
              <p-chips [(ngModel)]="threeJsModelPackConfig.namePath"></p-chips>
            </td>
            <td>
              <p-button type="button" icon="pi pi-save" styleClass="p-button-sm"
                        [disabled]="!threeJsModelPackConfig"
                        (onClick)="onThreeJsModelPackConfigSave(threeJsModelPackConfig)"></p-button>
            </td>
          </tr>
        </ng-template>
      </p-table>
    </p-panel>
  </div>
</div>
